<h1 align="center">üîí –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è Nginx –≤ XC_VM</h1>

<p align="center">
  –í —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –æ–ø–∏—Å–∞–Ω –ø—Ä–æ—Ü–µ—Å—Å <b>—Å–æ–∑–¥–∞–Ω–∏—è —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞. –°–ª–µ–¥—É–π—Ç–µ —à–∞–≥–∞–º, —á—Ç–æ–±—ã –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ HTTPS-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.
</p>

<p align="center">
  <a href="../../ru/main-page.md"><b>‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</b></a>
</p>

---

## üìö –ù–∞–≤–∏–≥–∞—Ü–∏—è

* [üìò –í–≤–µ–¥–µ–Ω–∏–µ](#-–≤–≤–µ–¥–µ–Ω–∏–µ)
* [üß≠ –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](#-—Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
* [üß± –®–∞–≥ 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞](#-—à–∞–≥-1-—Å–æ–∑–¥–∞–Ω–∏–µ-–ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ-–∫–ª—é—á–∞)
* [‚öôÔ∏è –®–∞–≥ 2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ servercnf](#Ô∏è-—à–∞–≥-2-—Å–æ–∑–¥–∞–Ω–∏–µ-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ-—Ñ–∞–π–ª–∞-servercnf)
* [üîë –®–∞–≥ 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞](#-—à–∞–≥-3-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-—Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ-ssl-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞)
* [üìÇ –ò—Ç–æ–≥–æ–≤—ã–µ —Ñ–∞–π–ª—ã](#-–∏—Ç–æ–≥–æ–≤—ã–µ-—Ñ–∞–π–ª—ã)
* [‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç](#-—Ä–µ–∑—É–ª—å—Ç–∞—Ç)
* [‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è](#Ô∏è-–ø—Ä–∏–º–µ—á–∞–Ω–∏—è)

---

## üìò –í–≤–µ–¥–µ–Ω–∏–µ

**SSL (Secure Sockets Layer)** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏ –¥–æ–≤–µ—Ä–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
–í —ç—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ–∫–∞–∑–∞–Ω–æ, –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å **—Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** –¥–ª—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ **Nginx** –≤ –ø—Ä–æ–µ–∫—Ç–µ **XC_VM**.

---

## üß≠ –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–í—Å–µ SSL-—Ñ–∞–π–ª—ã (–∫–ª—é—á, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:

```bash
/home/xc_vm/bin/nginx/conf
```

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–µ—ë:

```bash
cd /home/xc_vm/bin/nginx/conf
```

---

## üß± –®–∞–≥ 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ **RSA-–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á** (2048 –±–∏—Ç):

```bash
openssl genrsa -out server.key 2048
```

üìÑ –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ—è–≤–∏—Ç—Å—è —Ñ–∞–π–ª `server.key`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π **–∑–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á**.
–•—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ **–≤ —Å–µ–∫—Ä–µ—Ç–µ** ‚Äî —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞.

---

## ‚öôÔ∏è –®–∞–≥ 2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ `server.cnf`

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:

```bash
cat > server.cnf << EOF
[req]
distinguished_name = req_distinguished_name
x509_extensions = v3_req
prompt = no

[req_distinguished_name]
C = RU
ST = Moscow
L = Moscow
O = XC_VM
OU = XC_VM
CN = XC_VM

[v3_req]
keyUsage = keyEncipherment, dataEncipherment
extendedKeyUsage = serverAuth
subjectAltName = @alt_names

[alt_names]
DNS.1 = XC_VM
EOF
```

üìò **–û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**

| –ü–æ–ª–µ    | –ó–Ω–∞—á–µ–Ω–∏–µ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                      |
| ------- | -------- | ------------------------------- |
| `C`     | RU       | –°—Ç—Ä–∞–Ω–∞ (Country)                |
| `ST`    | Moscow   | –†–µ–≥–∏–æ–Ω (State)                  |
| `L`     | Moscow   | –ì–æ—Ä–æ–¥ (Locality)                |
| `O`     | XC_VM    | –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è                     |
| `OU`    | XC_VM    | –û—Ç–¥–µ–ª / –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ           |
| `CN`    | XC_VM    | –ò–º—è —Ö–æ—Å—Ç–∞ (Common Name)         |
| `DNS.1` | XC_VM    | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ –∏–º—è –¥–æ–º–µ–Ω–∞ (SAN) |

> üí° **–°–æ–≤–µ—Ç:** –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è, –Ω–∞–ø—Ä–∏–º–µ—Ä `DNS.1 = example.com`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

---

## üîë –®–∞–≥ 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å –ø–æ–º–æ—â—å—é —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
openssl req -new -x509 -key server.key -out server.crt -days 3650 -config server.cnf
```

üìÜ **–ü–æ—è—Å–Ω–µ–Ω–∏—è:**

* `-new -x509` ‚Äî —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç.
* `-days 3650` ‚Äî —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (10 –ª–µ—Ç).
* `-config server.cnf` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.
* –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –±—É–¥–µ—Ç —Ñ–∞–π–ª `server.crt`.

---

## üìÇ –ò—Ç–æ–≥–æ–≤—ã–µ —Ñ–∞–π–ª—ã

–ü–æ—Å–ª–µ –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤ `/home/xc_vm/bin/nginx/conf` –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è:

| –§–∞–π–ª         | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                     |
| ------------ | ------------------------------ |
| `server.key` | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á                 |
| `server.crt` | –°–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç |
| `server.cnf` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞       |

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –≤–∞—à **XC_VM Nginx —Å–µ—Ä–≤–µ—Ä** –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É **HTTPS**, –∏—Å–ø–æ–ª—å–∑—É—è —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç.
–ë—Ä–∞—É–∑–µ—Ä—ã –º–æ–≥—É—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å –æ ¬´–Ω–µ–¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–µ¬ª ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã—Ö SSL.

---

## ‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

* –°–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –ø–æ–¥—Ö–æ–¥—è—Ç **–¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**.
* –î–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ—Ç **–¥–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö —Ü–µ–Ω—Ç—Ä–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, [Let's Encrypt](https://letsencrypt.org/)).
* –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–æ–º–µ–Ω–Ω–æ–≥–æ –∏–º–µ–Ω–∏ (`CN` –∏–ª–∏ `DNS.1`) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ **—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∑–∞–Ω–æ–≤–æ**.
* –ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
openssl x509 -in server.crt -text -noout
```

---

<p align="center">
  <a href="../../ru/main-page.md"><b>‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</b></a>
</p>

---